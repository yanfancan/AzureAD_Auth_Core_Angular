<div style="padding: 2em">
  <h2>Users</h2>

  <nav class="navbar">
    <!--<input class="form-control" type="text" name="search" [(ngModel)]="filter" placeholder="filter">-->
  </nav>

  <table class="values">
    <tr>
      <th> FirstName </th>
      <th> LastName</th>
      <th> Department</th>
      <th> Email</th>
      <th> Position</th>
      <th> Access Level</th>
      <th> Password Reset</th>
      <th> Account Disabled</th>
      <th> Account Locked</th>
      <th> Delete</th>
    </tr>
    <!-- rows with input for the initial array of objects passed from the Database -->
    <tr class="changable" *ngFor="let value of values | filter:filter | paginate: { itemsPerPage: 10, currentPage: p }; index as i" id="{{value.Id}}">
      <td>
        <input [(ngModel)]="value.firstName" class="form-control" type="text" name="{{value.firstName}}" />
      </td>
      <td>
        <input [(ngModel)]="value.lastName" class="form-control" type="text" name="{{value.lastName}}" />
      </td>
      <td>
        <input [(ngModel)]="value.department" class="form-control" type="text" name="{{value.department}}" />
      </td>
      <td>
        <input [(ngModel)]="value.email" class="form-control" type="text" name="{{value.email}}" />
      </td>
      <td>
        <input [(ngModel)]="value.position" class="form-control" type="text" name="{{value.position}}" />
      </td>
      <td>
        <select [(ngModel)]="value.accessLevel" class="form-control" type="text" name="{{value.accessLevel}}">
          <option value="1">Administrator</option>
          <option value="2">User</option>
        </select>
      </td>
      <td><input type="checkbox" name="passwordReset" /></td>
      <td><input type="checkbox" name="accountDisabled" value="{{value.accountDisabled}}" [(ngModel)]="value.accountDisabled" /></td>
      <td><input type="checkbox" name="accountLocked" value="{{value.accountLocked}}" [(ngModel)]="value.accountLocked" /></td>
      <td> <button id="delete-user" class="btn btn-lg btn-danger btn-block" (click)="deleteRow(i)"> delete </button></td>
    </tr>

    <!-- row with input for records that have just been added -->
    <tr *ngFor="let value of newRecords; index as i">
      <td>
        <input [(ngModel)]="value.firstName" class="form-control" type="text" name="{{value.firstName}}" />
      </td>
      <td>
        <input [(ngModel)]="value.lastName" class="form-control" type="text" name="{{value.lastName}}" />
      </td>
      <td>
        <input [(ngModel)]="value.department" class="form-control" type="text" name="{{value.department}}" />
      </td>
      <td>
        <input [(ngModel)]="value.email" class="form-control" type="text" name="{{value.email}}" />
      </td>
      <td>
        <input [(ngModel)]="value.position" class="form-control" type="text" name="{{value.position}}" />
      </td>
      <td>
        <select [(ngModel)]="value.accessLevel" class="form-control" type="text" name="{{value.accessLevel}}">
          <option value="1">Administrator</option>
          <option value="2">User</option>
        </select>
      </td>
      <td><input type="checkbox" name="passwordReset" /></td>
      <td><input type="checkbox" name="accountDisabled" value="{{value.accountDisabled}}" [(ngModel)]="value.accountDisabled" /></td>
      <td><input type="checkbox" name="accountLocked" value="{{value.accountLocked}}" [(ngModel)]="value.accountLocked" /></td>

      <td> <button id="delete-new" class="btn btn-lg btn-danger btn-block" (click)="deleteNew(i)"> delete </button></td>
    </tr>

    <!-- row with input for a new record -->
    <tr>
      <td>
        <input [(ngModel)]="dboUser.firstName" class="form-control" type="text" name="{{dboUser.firstName}}" />
      </td>
      <td>
        <input [(ngModel)]="dboUser.lastName" class="form-control" type="text" name="{{dboUser.lastName}}" />
      </td>
      <td>
        <input [(ngModel)]="dboUser.department" class="form-control" type="text" name="{{dboUser.department}}" />
      </td>
      <td>
        <input [(ngModel)]="dboUser.email" class="form-control" type="text" name="{{dboUser.email}}" />
      </td>
      <td>
        <input [(ngModel)]="dboUser.position" class="form-control" type="text" name="{{dboUser.position}}" />
      </td>
      <td>
        <select [(ngModel)]="dboUser.accessLevel" class="form-control" type="text" name="{{dboUser.accessLevel}}">
          <option value="1">Administrator</option>
          <option value="2">User</option>
        </select>
      </td>
      <td><input [(ngModel)]="dboUser.password" class="form-control" type="text" name="{{dboUser.password}}" style="width: 100%" /></td>
      <td><input type="checkbox" name="accountDisabled" value="{{dboUser.accountDisabled}}" [(ngModel)]="dboUser.accountDisabled" /></td>
      <td><input type="checkbox" name="accountLocked" value="{{dboUser.accountLocked}}" [(ngModel)]="dboUser.accountLocked" /></td>

      <td> <button id="add-user" class="btn btn-lg btn-success btn-block" (click)="addUser()"> add user </button></td>
    </tr>
  </table>
  <div id="below-table">
    <button id="save" class="btn btn-lg btn-primary btn-block" (click)="save()"> save </button>
    <pagination-controls (pageChange)="p = $event" class="pagination"></pagination-controls>
  </div>
</div>
